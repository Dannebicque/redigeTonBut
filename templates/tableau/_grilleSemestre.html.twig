<div style="overflow-x: auto">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Comp√©tences</th>
            <th>AC</th>
            <th>&nbsp;</th>
            {% for sae in saes %}
                <th><abbr title="{{ sae.libelle }}">{{ sae.codeMatiere }}</abbr></th>
            {% endfor %}
            <th>&nbsp;</th>
            {% for ressource in ressources %}
                <th><abbr title="{{ ressource.libelle }}">{{ ressource.codeMatiere }}</abbr></th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>

        {% for niveau in niveaux %}
            <tr>
                <th rowspan="{{ niveau.apcApprentissageCritiques|length + 2 }}" class="bg_{{ niveau.competence
                .couleur }}">
                    {{ niveau.competence.nomCourt }}
                </th>
            </tr>

            {% for ac in niveau.apcApprentissageCritiques %}
                <tr>
                    <th class="bg_{{ niveau.competence.couleur }}"><abbr title="{{ ac.libelle }}">{{ ac.code }}</abbr></th>
                    <th>&nbsp;</th>
                    {% for sae in saes %}
                        <td>
                            <input type="checkbox"
                                   data-sae="{{ sae.id }}"
                                   data-ac="{{ ac.id }}"
                                   class="changeAcSae"
                                   {% if tab.saes[sae.id] is defined and tab.saes[sae.id][ac.id] is defined %}checked{%
                                endif %} />
                        </td>
                    {% endfor %}
                    <th>&nbsp;</th>
                    {% for ressource in ressources %}
                        <td>
                            <input type="checkbox"
                                   data-ressource="{{ ressource.id }}"
                                   data-ac="{{ ac.id }}"
                                   class="changeAcRessource"
                                   {% if tab.ressources[ressource.id] is defined and tab.ressources[ressource.id][ac.id] is defined %}checked{%
                                endif %} />
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
            <tr>
                <th>Ceoff.</th>
                <th>&nbsp;</th>
                {% for sae in saes %}
                    <td>
                        <input type="text" class="form-control changeCoeffSae"
                               style="min-width: 50px"
                               data-sae="{{ sae.id }}"
                               data-competence="{{ niveau.competence.id }}"
                                {% if coefficients[niveau.competence.id] is defined and coefficients[niveau.competence
                                .id].saes[sae.id] is defined %}
                                    value="{{  coefficients[niveau.competence.id].saes[sae.id] }}"
                                {% endif %}
                        />
                    </td>
                {% endfor %}
                <th>&nbsp;</th>
                {% for ressource in ressources %}
                    <td>
                        <input type="text"
                               style="min-width: 50px"
                               data-ressource="{{ ressource.id }}"
                               data-competence="{{ niveau.competence.id }}"
                               class="form-control changeCoeffRessource"
                               {% if coefficients[niveau.competence.id] is defined and coefficients[niveau.competence
                               .id].ressources[ressource.id] is defined %}
                                value="{{  coefficients[niveau.competence.id].ressources[ressource.id] }}"
                               {% endif %}
                                />
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td colspan="{{ 6 + ressources|length + saes|length }}"></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
